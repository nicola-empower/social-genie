<!-- ===================================================== -->
<!-- FILE: templates/view_blog.html                      -->
<!-- This version applies the new class to fix invisible text. -->
<!-- ===================================================== -->

{% extends "base.html" %}
{% block title %}{{ blog_post.title }}{% endblock %}

{% block content %}
<div class="bg-slate-800 p-6 rounded-lg shadow-lg border border-slate-700">
    <div class="flex justify-between items-center mb-4">
        <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-emerald-500">{{ blog_post.title }}</h1>
        <p class="text-sm text-gray-400">Created: {{ blog_post.created_at.strftime('%Y-%m-%d') }}</p>
    </div>
    
    <!-- The new 'blog-content' class is added here -->
    <div id="content-display" class="max-w-none mb-8 blog-content">
        {{ blog_post.content | safe }}
    </div>

    <div id="edit-form" class="hidden">
        <form action="{{ url_for('update_blog', blog_id=blog_post.id) }}" method="POST">
            <div class="mb-4">
                <label for="title" class="block text-sm font-medium text-gray-300">Title</label>
                <input type="text" name="title" id="title" value="{{ blog_post.title }}" class="bg-slate-700 text-gray-200 mt-1 block w-full rounded-md border-slate-600 shadow-sm sm:text-sm">
            </div>
            <div class="mb-4">
                <label for="content" class="block text-sm font-medium text-gray-300">Content (Markdown supported)</label>
                <textarea name="content" id="content" rows="20" class="bg-slate-700 text-gray-200 mt-1 block w-full rounded-md border-slate-600 shadow-sm sm:text-sm">{{ blog_post.content }}</textarea>
            </div>
            <div class="flex items-center justify-end gap-4">
                <button type="button" onclick="toggleEdit()" class="text-sm text-gray-400 hover:text-gray-200">Cancel</button>
                <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-gradient-to-r from-pink-500 to-emerald-500">Save Changes</button>
            </div>
        </form>
    </div>

    <div id="action-buttons" class="flex items-center justify-end gap-4 border-t border-slate-700 pt-4 mt-6">
        <a href="{{ url_for('blog') }}" class="text-sm text-gray-400 hover:text-gray-200">‚Üê Back to Blog List</a>
        <button onclick="toggleEdit()" class="px-4 py-2 border border-slate-600 text-sm font-medium rounded-md shadow-sm text-gray-300 bg-slate-700 hover:bg-slate-600">Edit Post</button>
    </div>
</div>

<script>
    function toggleEdit() {
        document.getElementById('content-display').classList.toggle('hidden');
        document.getElementById('action-buttons').classList.toggle('hidden');
        document.getElementById('edit-form').classList.toggle('hidden');
    }
</script>
{% endblock %}
